# Gemini API 사용량 및 비용 가이드

## 📊 현재 설정

- **사용 모델**: `gemini-2.5-flash` (우선), `gemini-1.5-flash` (fallback)
- **최대 출력 토큰**: 4,000 tokens
- **온도**: 0.8
- **평균 입력 토큰**: 약 100-200 tokens (프롬프트 + 시스템 지시사항)
- **평균 출력 토큰**: 약 800-1500 tokens

---

## 🆓 무료 티어 (Google AI Studio)

### 제한 사항
- **일일 요청 수**: **15 requests/분** (900 requests/시간)
- **월간 요청 수**: **약 1,500 requests** (변동 가능, Google 정책에 따라 변경됨)
- **무료 한도 초과 시**: 유료 요금제로 전환 또는 일일 제한 초과 시 요청 거부

### 무료 티어로 가능한 사용량
- **하루 최대**: 약 **900 requests** (1분당 15개 제한 기준)
- **월간 최대**: 약 **1,500 requests** (Google AI Studio 무료 티어 기준)
- **비용**: **$0** (무료 티어 내에서는)

---

## 💰 유료 요금제 (무료 티어 초과 시)

### Gemini 2.5 Flash / 1.5 Flash 가격 (2024-2025 기준)

#### 입력 토큰 비용
- **Gemini 2.5 Flash**: 약 **$0.075 / 1M tokens**
- **Gemini 1.5 Flash**: 약 **$0.075 / 1M tokens**

#### 출력 토큰 비용
- **Gemini 2.5 Flash**: 약 **$0.30 / 1M tokens**
- **Gemini 1.5 Flash**: 약 **$0.30 / 1M tokens**

### 비용 계산 예시

**시나리오 1: 무료 티어 내 사용 (일일 100회)**
- 입력: 100회 × 150 tokens = 15,000 tokens ≈ **$0.001**
- 출력: 100회 × 1,000 tokens = 100,000 tokens ≈ **$0.03**
- **총 비용: 약 $0.03/일** (무료 티어 내에서는 **$0**)

**시나리오 2: 무료 티어 초과 (일일 1,000회)**
- 입력: 1,000회 × 150 tokens = 150,000 tokens ≈ **$0.011**
- 출력: 1,000회 × 1,000 tokens = 1,000,000 tokens = **$0.30**
- **총 비용: 약 $0.31/일** ($9.30/월)

**시나리오 3: 중규모 사용 (일일 10,000회)**
- 입력: 10,000회 × 150 tokens = 1,500,000 tokens ≈ **$0.11**
- 출력: 10,000회 × 1,000 tokens = 10,000,000 tokens = **$3.00**
- **총 비용: 약 $3.11/일** ($93.30/월)

---

## 📈 사용량 모니터링

### Google Cloud Console에서 확인
1. [Google Cloud Console](https://console.cloud.google.com/) 접속
2. "API 및 서비스" > "사용량" 메뉴
3. Gemini API 사용량 확인

### 비용 알림 설정
1. Cloud Console > "빌링" > "예산 및 알림"
2. 예산 설정 및 알림 임계값 설정 (예: $10, $50 등)
3. 이메일 알림 설정

---

## 🎯 추천 사용 전략

### 1. 무료 티어 최대 활용
- 일일 900 requests 이하로 제한
- 사용자당 일일 제한 설정 고려
- 캐싱 활용으로 중복 요청 방지

### 2. 비용 절감 방법
- **배치 모드 사용**: 동기 호출 대비 **50% 절감**
- **토큰 최적화**: 불필요한 프롬프트 줄이기
- **캐싱**: 유사한 요청 결과 재사용

### 3. 사용량 제한 구현 (선택사항)
```typescript
// 사용자별 일일 제한 예시
const DAILY_LIMIT = 10 // 사용자당 일일 10회 제한
const RATE_LIMIT = 60 // 1분당 15회 제한 (무료 티어 기준)
```

---

## ⚠️ 주의사항

1. **무료 티어는 제한적**: 일일 요청 수 제한이 있음
2. **비용 예측**: 무료 티어 초과 시 예상치 못한 비용 발생 가능
3. **모니터링 필수**: 정기적으로 사용량 확인 필요
4. **알림 설정**: 비용 알림 설정 권장

---

## 📊 실제 사용 추정

### 현재 구현 기준
- **평균 응답 시간**: 약 16초 (서버 로그 기준)
- **평균 응답 길이**: 약 800-1,000자
- **예상 토큰 사용량**: 
  - 입력: ~150 tokens
  - 출력: ~1,000 tokens
  - **총: ~1,150 tokens/요청**

### 무료 티어 내 추정
- **일일 최대**: 900 requests
- **월간 최대**: 1,500 requests
- **비용**: **$0**

### 무료 티어 초과 시 (1,000 requests/일)
- **일일 비용**: 약 **$0.31**
- **월간 비용**: 약 **$9.30**

---

## 🔗 참고 자료

- [Google AI Studio](https://aistudio.google.com/)
- [Gemini API 가격](https://ai.google.dev/pricing)
- [Google Cloud Console](https://console.cloud.google.com/)

---

## 💡 요약

### 무료 티어 (권장)
- **일일 제한**: 약 900 requests
- **비용**: **$0**
- **적합한 용도**: 개인 프로젝트, 소규모 테스트

### 유료 요금제 (무료 티어 초과 시)
- **입력**: $0.075 / 1M tokens
- **출력**: $0.30 / 1M tokens
- **예상 비용**: 1,000 requests/일 = **$0.31/일** ($9.30/월)

